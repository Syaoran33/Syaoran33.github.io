<!DOCTYPE html><html lang="en" theme-mode="auto"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>基于Python的王国之泪神庙现实原型研究 | Blog Here</title><link rel="icon" type="image/x-icon" href="/favicon.ico"><script>var config = {"root":"/","search":{"preload":false,"activeHolder":"Enter here","blurHolder":"Search","noResult":"Data \"$0\" not found"},"code":{"codeInfo":"$0 - $1 lines","copy":"copy","copyFinish":"copied","expand":"expand"}}</script><script src="//unpkg.com/mermaid@9.2.2/dist/mermaid.min.js"></script><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lightgallery.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-zoom.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-thumbnail.css"><link type="text/css" rel="stylesheet" href="/lib/fontawesome/brands.min.css"><link type="text/css" rel="stylesheet" href="/lib/fontawesome/fontawesome.min.css"><link rel="stylesheet" href="/css/arknights.css"><script>if (window.localStorage.getItem('theme-mode') === 'light' || window.matchMedia('(prefers-color-scheme:light)').matches) document.documentElement.setAttribute('theme-mode', 'light')
if (window.localStorage.getItem('theme-mode') === 'dark' || window.matchMedia('(prefers-color-scheme:dark)').matches) document.documentElement.setAttribute('theme-mode', 'dark')</script><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}
@font-face {
 font-family: 'Font Awesome 6 Brands';
 src: local('Font Awesome 6 Brands'), url('/lib/fontawesome/fa-brands.woff2') format('woff2');
}
@font-face {
 font-family: 'Font Awesome 6 Free';
 src: local('Font Awesome 6 Free'), url('/lib/fontawesome/fa-regular.woff2') format('woff2');
}</style><style>:root {
  --dark-background: url('https://ak.hypergryph.com/assets/index/images/ak/pc/bk.jpg');
  --light-background: url('/img/bk.jpg');
}</style><meta name="generator" content="Hexo 6.3.0"></head><body><div class="loading" style="opacity: 0"><div class="loadingBar left"></div><div class="loadingBar right"></div></div><main><header class="closed"><nav><div class="navBtn hide"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><div class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="Search" spellcheck="false" maxlength="50" type="text" id="search-input"></span></div><div class="navItem" id="search-holder"></div><div class="search-popup"><div id="search-result"></div></div><ol class="navContent"><li class="navItem"><a class="navBlock" href="/"><span class="navItemTitle">Home</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/archives/"><span class="navItemTitle">Archives</span></a></li><li class="navItem"><a class="navBlock" href="/about/"><span class="navItemTitle">About</span></a></li><li class="navItem"><a class="navBlock" href="/music/"><span class="navItemTitle">Music</span></a></li></ol></nav></header><article><div id="post-bg"><div id="post-title"><h1>基于Python的王国之泪神庙现实原型研究</h1><div id="post-info"><span>First Post: <div class="control"><time datetime="2023-06-23T16:00:00.000Z" id="date"> 2023-06-24</time></div></span><br><span>Last Update: <div class="control"><time datetime="2023-07-07T16:00:00.000Z" id="updated"> 2023-07-08</time></div></span></div></div><hr><div id="post-content"><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>本篇是对塞尔达传说：王国之泪中破魔神庙的现实原型进行研究，灵感来源B站<a target="_blank" rel="noopener" href="https://space.bilibili.com/1583595718">Gu-Utd</a>大佬的<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1qh4y1R7nU">视频</a></p>
<p>旨在通过信息化手段进行研究， 使用Python编写分析程序，对原始数据清洗、过滤和转换后，与游戏数据进行匹配，最后根据相似度判断出可能性最高的现实原型。</p>
<h2 id="研究思路"><a href="#研究思路" class="headerlink" title="研究思路"></a>研究思路</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mermaid">stateDiagram<br>    [*] --&gt; 数据获取<br>    数据获取--&gt; 神庙数据<br>    数据获取--&gt; 原型数据<br>    原型数据--&gt; 文本处理<br>    文本处理--&gt; 数据清洗<br>    神庙数据--&gt; 数据清洗<br>    数据清洗--&gt; 数据比对<br>    数据比对--&gt; 生成结果<br></code></pre></td></tr></table></figure>





<h2 id="研究步骤"><a href="#研究步骤" class="headerlink" title="研究步骤"></a>研究步骤</h2><h3 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h3><p>httpx:  爬虫异步请求<br>posuto： 日本邮编查询地区<br>pykakasi： 汉字假名转换<br>pandas： 处理表类数据</p>
<h3 id="爬取数据"><a href="#爬取数据" class="headerlink" title="爬取数据"></a>爬取数据</h3><p>在各种官方网站查找，大部分数据都嵌入到了HTML中，返回的结果也不太容易处理</p>
<p>最后在搜索景点时，锁定了<a target="_blank" rel="noopener" href="https://www.its-mo.com/">いつもNAVI</a>这家导航网站, 以下简称<code>一导网</code></p>
<h4 id="全量数据"><a href="#全量数据" class="headerlink" title="全量数据"></a>全量数据</h4><p>京都府全量数据高达<strong>130524件</strong></p>
<p><a target="_blank" rel="noopener" href="https://www.its-mo.com/pois/26/">京都府の全ジャンル　1ページ目 | いつもNAVI (its-mo.com)</a></p>
<p><img src="/img/totk_shrine01.png"></p>
<h4 id="景点数据"><a href="#景点数据" class="headerlink" title="景点数据"></a>景点数据</h4><p>景点数据大概5000个，数量少很多了，就以此来爬取</p>
<p><a target="_blank" rel="noopener" href="https://www.its-mo.com/pois/26/?genrecode=0200000000">京都府のレジャー・観光・スポーツ　1ページ目 | いつもNAVI (its-mo.com)</a></p>
<p><img src="/img/totk_shrine02.png"></p>
<h4 id="编写爬虫程序"><a href="#编写爬虫程序" class="headerlink" title="编写爬虫程序"></a>编写爬虫程序</h4><p>以景点为例，爬取所有页面上的数据</p>
<p>选择这个网站的好处就是，它返回的数据为<code>JSON</code>格式，方便编程语言调用和数据处理</p>
<p>这里分析数据包，标准的接口请求，直接照搬即可，不用设置<code>Cookies</code></p>
<p>具体爬虫分析和编写不做演示了</p>
<p>变量为<code>页码</code>和<code>页码数</code>,这里怕有限制直接没用异步了，完整代码如下</p>
<p>获取京都全量数据未演示，也是同理</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> httpx<br><span class="hljs-keyword">import</span> math<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_sights</span>(<span class="hljs-params">page_index:<span class="hljs-built_in">int</span>=<span class="hljs-number">0</span>, page_size:<span class="hljs-built_in">int</span>=<span class="hljs-number">100</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;爬取景点数据&quot;&quot;&quot;</span><br>    headers = &#123;<br>        <span class="hljs-string">&#x27;authority&#x27;</span>: <span class="hljs-string">&#x27;webapi.its-mo.com&#x27;</span>,<br>        <span class="hljs-string">&#x27;accept&#x27;</span>: <span class="hljs-string">&#x27;application/json, text/plain, */*&#x27;</span>,<br>        <span class="hljs-string">&#x27;accept-language&#x27;</span>: <span class="hljs-string">&#x27;zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6&#x27;</span>,<br>        <span class="hljs-comment">#&#x27;if-none-match&#x27;: &#x27;W/&quot;2734a-Nvyv8016ajHuxDUWfPl1/jG4Bkg&quot;&#x27;,</span><br>        <span class="hljs-string">&#x27;origin&#x27;</span>: <span class="hljs-string">&#x27;https://www.its-mo.com&#x27;</span>,<br>        <span class="hljs-string">&#x27;referer&#x27;</span>: <span class="hljs-string">&#x27;https://www.its-mo.com/&#x27;</span>,<br>        <span class="hljs-string">&#x27;sec-ch-ua&#x27;</span>: <span class="hljs-string">&#x27;&quot;Not.A/Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;114&quot;, &quot;Microsoft Edge&quot;;v=&quot;114&quot;&#x27;</span>,<br>        <span class="hljs-string">&#x27;sec-ch-ua-mobile&#x27;</span>: <span class="hljs-string">&#x27;?0&#x27;</span>,<br>        <span class="hljs-string">&#x27;sec-ch-ua-platform&#x27;</span>: <span class="hljs-string">&#x27;&quot;Windows&quot;&#x27;</span>,<br>        <span class="hljs-string">&#x27;sec-fetch-dest&#x27;</span>: <span class="hljs-string">&#x27;empty&#x27;</span>,<br>        <span class="hljs-string">&#x27;sec-fetch-mode&#x27;</span>: <span class="hljs-string">&#x27;cors&#x27;</span>,<br>        <span class="hljs-string">&#x27;sec-fetch-site&#x27;</span>: <span class="hljs-string">&#x27;same-site&#x27;</span>,<br>        <span class="hljs-string">&#x27;user-agent&#x27;</span>: <span class="hljs-string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36 Edg/114.0.1823.51&#x27;</span>,<br>    &#125;<br>    page_index = <span class="hljs-built_in">str</span>(page_index)<br>    page_size = <span class="hljs-built_in">str</span>(page_size)<br>    response = httpx.get(<br>        <span class="hljs-string">f&#x27;https://webapi.its-mo.com/poi?content=EKI_JRD,DIDX_EKI,DIDX_DKE,DIDX_ZPOI,ZIDX_BLD,KNK_ZPOI,KNK_CAMP,HTL_RKT,RTC_RKT,PAC_PWORLD,PPK_ZPOI,PPK_PARK,PPK_REPARK,PPK_AKP,GLF_RKT,GS_GOGO,WP_ORBIS,LOC_AED,RS_ADEOS,LCF_ADEOS,PPK_MKS2,GRM_GNAVI&amp;addrcode=26&amp;facet=tod,shk,oaz,gnrnm&amp;sort=%2Bdist,-fmsth,-fmnm,-pscore,ckbn&amp;limit=<span class="hljs-subst">&#123;page_index&#125;</span>,<span class="hljs-subst">&#123;page_size&#125;</span>&amp;exclude_link=T&amp;genrecode=0200000000&#x27;</span>,<br>        headers=headers,<br>    )<br>    <span class="hljs-keyword">return</span> response.json()<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_index</span>(<span class="hljs-params">total:<span class="hljs-built_in">int</span>, page_size:<span class="hljs-built_in">int</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;生成页码&quot;&quot;&quot;</span><br>    size = math.ceil(total/page_size) <br>    ls = [ <span class="hljs-number">0</span> + i * page_size <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(size)]<br>    <span class="hljs-keyword">return</span> ls<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_all_sights</span>(<span class="hljs-params">total = <span class="hljs-number">4982</span>, page_size=<span class="hljs-number">100</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;获取所有景点数据&quot;&quot;&quot;</span><br>    ls = get_index(total,page_size)<br>    sights = []<br>    <span class="hljs-keyword">for</span> page_index <span class="hljs-keyword">in</span> ls:<br>        <span class="hljs-keyword">try</span>:<br>            sights_raw = get_sights(page_index,page_size)<br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> err:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Error: request fail@&#x27;</span> + err)<br>            sights_raw = &#123;&#125;<br>        <br>        sights.extend(sights_raw.get(<span class="hljs-string">&#x27;item&#x27;</span>,[]))<br><br>    <span class="hljs-keyword">return</span> sights<br><br>sights = get_all_sights(<span class="hljs-number">4982</span>,<span class="hljs-number">100</span>)<br><br></code></pre></td></tr></table></figure>

<h4 id="数据分析"><a href="#数据分析" class="headerlink" title="数据分析"></a>数据分析</h4><p>返回数据为<code>字典列表list[dict]</code>,截取其中一个展示</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;angle&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;text&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;清水寺&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;3757400&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;point&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;lat&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;34.9916083&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;lon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;135.7877917&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;distance&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;kana&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;キヨミズデラ&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;addressText&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;京都府京都市東山区清水１丁目２９４&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;zipcode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;605-0862&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;phoneNumber&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-string">&quot;075-551-1234&quot;</span><br>    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;content&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;DIDX_DKE&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;todcode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;26&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;todname&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;京都府&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;shkname&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;京都市東山区&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;shkcode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;105&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;oazcode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;071&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;oazname&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;清水１丁目&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;catId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;01:20301030000;02:3210000&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;iareacode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;14905&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;iareaname&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;祇園・東山&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;diareacode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;26-a14905&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;diareaname&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;洛東・祇園・東山・銀閣寺&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;fmnmFlag&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;fmthFlag&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;mscore&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;link01&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;kbn&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;KNK_ZPOI&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;J00000000000A3701470&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;nm&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;清水寺&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;kn&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;キヨミズデラ&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;addr&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;京都府京都市東山区清水１丁目２９４&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;telno&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;075-551-1234&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;ctchcpy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;音羽山の険しい山腹にある「清水の舞台」&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;image_url&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://imgcache.its-mo.com/contents/KNK_ZPOI/J00000000000A3701470/003137477-1/003137477-1_m.jpg&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;hours&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;06:00-18:00&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;holiday&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;年中無休&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;link02&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;link03&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;link04&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;link05&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;link06&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;link07&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;link08&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;link09&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;link10&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;eki_info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;清水五条&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5301&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;distance&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1456&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;genreText&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;寺院・神社・神宮&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;genreCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;020010001k&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;smallGenre&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0200000000:0200100000:020010001k&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;text&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;寺院・神社・神宮&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;count&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2042</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;middleGenre&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0200000000:0200100000&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;text&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;神社・寺・教会&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;count&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2363</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;bigGenre&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0200000000&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;text&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;レジャー・観光・スポーツ&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;count&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4982</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;content_data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;isMidnightOpen&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;opentime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;06:00-18:00&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;holiday&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;年中無休&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;links&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>            <span class="hljs-string">&quot;KNK_ZPOI&quot;</span><br>        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;linkContents&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>            <span class="hljs-punctuation">&#123;</span><br>                <span class="hljs-attr">&quot;kbn&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;KNK_ZPOI&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;J00000000000A3701470&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;nm&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;清水寺&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;kn&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;キヨミズデラ&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;addr&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;京都府京都市東山区清水１丁目２９４&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;telno&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;075-551-1234&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;ctchcpy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;音羽山の険しい山腹にある「清水の舞台」&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;image_url&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://imgcache.its-mo.com/contents/KNK_ZPOI/J00000000000A3701470/003137477-1/003137477-1_m.jpg&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;hours&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;06:00-18:00&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;holiday&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;年中無休&quot;</span><br>            <span class="hljs-punctuation">&#125;</span><br>        <span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure>



<h3 id="检索数据"><a href="#检索数据" class="headerlink" title="检索数据"></a>检索数据</h3><p>实际上在找数据网站爬取前，我先想到的是直接去Github上搜索</p>
<p>通过关键字检索，筛选条件文件格式设置为<code>JSON</code>或<code>CSV</code></p>
<h4 id="关键字检索"><a href="#关键字检索" class="headerlink" title="关键字检索"></a>关键字检索</h4><p>通过将已破解出来的现实原型的名称进行搜索，可以找到比较多的数据文件</p>
<p>当然这种方法比较偷懒，优点是拿来即用，缺点是很多数据不完整或者用不上</p>
<p><img src="/img/totk_shrine03.png"></p>
<h4 id="类型检索"><a href="#类型检索" class="headerlink" title="类型检索"></a>类型检索</h4><p>通过对关键字的检索，可以分析总结出具体会有哪些类型相关的数据</p>
<p>例如：</p>
<p>清水寺 -&gt; 寺庙 -&gt; temple</p>
<p>那么检索<code>kyoto temple</code>就可以获取到同类型的数据</p>
<p>以此类推，最后找到对应类型的<a href="##%E5%8E%9F%E5%9E%8B%E6%95%B0%E6%8D%AE">原型数据</a></p>
<h3 id="数据清洗"><a href="#数据清洗" class="headerlink" title="数据清洗"></a>数据清洗</h3><p>尽管上述方法获取的数据结构、格式都有所不同，但好在我们只需要<code>名称</code>就足够了</p>
<p>结合<code>神庙名称</code>，我们需要将这些名称也转换为对应的<code>片假名</code></p>
<h4 id="类名省略"><a href="#类名省略" class="headerlink" title="类名省略"></a>类名省略</h4><p>现将现实原型的名称分析，可将它拆分成两部分，名称加类型</p>
<p><code>清水寺 -&gt; 清水 + 寺</code></p>
<p>神庙就是根据名称变换而来，需要剔除掉类型，避免对后续的数据比对造成负面影响</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">ddef extract_name(reality_name:<span class="hljs-built_in">str</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;剔除类型名称&quot;&quot;&quot;</span><br>    ls = [<span class="hljs-string">&#x27;寺&#x27;</span>,<span class="hljs-string">&#x27;御所&#x27;</span>,<span class="hljs-string">&#x27;神社&#x27;</span>,<span class="hljs-string">&#x27;駅&#x27;</span>,<span class="hljs-string">&#x27;通&#x27;</span>,<span class="hljs-string">&#x27;池&#x27;</span>,<span class="hljs-string">&#x27;町&#x27;</span>,<span class="hljs-string">&#x27;堂&#x27;</span>,<span class="hljs-string">&#x27;宮&#x27;</span>,<span class="hljs-string">&#x27;路&#x27;</span>,<span class="hljs-string">&#x27;塚&#x27;</span>]<br>    <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> ls:<br>        split_ls = reality_name.split(t)<br>        reality_name = split_ls[<span class="hljs-number">0</span>]<br>        <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">return</span> reality_name<br></code></pre></td></tr></table></figure>

<p>使用split()方法截取到类型前的名称，同时需要考虑类名是否对名称产生影响</p>
<p>例如，‘川’、‘橋’、‘院’这种可能包含在名称中的类型，视情况调整</p>
<h4 id="真假名转换"><a href="#真假名转换" class="headerlink" title="真假名转换"></a>真假名转换</h4><p>对于真名(日本汉字)转换为假名，直接在GitHub上找到了相关的包</p>
<p><a target="_blank" rel="noopener" href="https://github.com/miurahr/pykakasi">miurahr&#x2F;pykakasi: Lightweight converter from Japanese Kana-kanji sentences into Kana-Roman. (github.com)</a></p>
<p>使用<code>pykakasi</code>可以将输入任何日语，转换成平假名、片假名和罗马音</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">kanji2katakana</span>(<span class="hljs-params">kanji:<span class="hljs-built_in">str</span></span>)-&gt;<span class="hljs-built_in">list</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;汉字转片假名&quot;&quot;&quot;</span><br>    query =  kks.convert(kanji)<br>    katakana = <span class="hljs-string">&#x27;&#x27;</span><br>    <span class="hljs-keyword">for</span> part <span class="hljs-keyword">in</span> query:<br>        kana = part[<span class="hljs-string">&#x27;kana&#x27;</span>]<br>        katakana += kana<br>    <span class="hljs-keyword">return</span> katakana<br><br><span class="hljs-comment">#かな: kana &#x27;カナ&#x27;, hiragana: &#x27;かな&#x27;, romaji: &#x27;kana&#x27;</span><br><span class="hljs-comment">#漢字: kana &#x27;カンジ&#x27;, hiragana: &#x27;かんじ&#x27;, romaji: &#x27;kanji&#x27;</span><br></code></pre></td></tr></table></figure>



<h4 id="变音统一"><a href="#变音统一" class="headerlink" title="变音统一"></a>变音统一</h4><p>日语中存在浊音和半浊音，神庙名称也存在这种变形</p>
<p>因为可能存在双向的转换，这里统一将所有的变音转换为原音，不论是神庙还是现实原型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">が -&gt; か<br>Ga -&gt; Ka<br></code></pre></td></tr></table></figure>

<p>直接让ChatGPT帮忙写一个转换</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python">mapping_table = &#123;<br>    <span class="hljs-string">&#x27;が&#x27;</span>: <span class="hljs-string">&#x27;か&#x27;</span>, <span class="hljs-string">&#x27;ぎ&#x27;</span>: <span class="hljs-string">&#x27;き&#x27;</span>, <span class="hljs-string">&#x27;ぐ&#x27;</span>: <span class="hljs-string">&#x27;く&#x27;</span>, <span class="hljs-string">&#x27;げ&#x27;</span>: <span class="hljs-string">&#x27;け&#x27;</span>, <span class="hljs-string">&#x27;ご&#x27;</span>: <span class="hljs-string">&#x27;こ&#x27;</span>,<br>    <span class="hljs-string">&#x27;ざ&#x27;</span>: <span class="hljs-string">&#x27;さ&#x27;</span>, <span class="hljs-string">&#x27;じ&#x27;</span>: <span class="hljs-string">&#x27;し&#x27;</span>, <span class="hljs-string">&#x27;ず&#x27;</span>: <span class="hljs-string">&#x27;す&#x27;</span>, <span class="hljs-string">&#x27;ぜ&#x27;</span>: <span class="hljs-string">&#x27;せ&#x27;</span>, <span class="hljs-string">&#x27;ぞ&#x27;</span>: <span class="hljs-string">&#x27;そ&#x27;</span>,<br>    <span class="hljs-string">&#x27;だ&#x27;</span>: <span class="hljs-string">&#x27;た&#x27;</span>, <span class="hljs-string">&#x27;ぢ&#x27;</span>: <span class="hljs-string">&#x27;ち&#x27;</span>, <span class="hljs-string">&#x27;づ&#x27;</span>: <span class="hljs-string">&#x27;つ&#x27;</span>, <span class="hljs-string">&#x27;で&#x27;</span>: <span class="hljs-string">&#x27;て&#x27;</span>, <span class="hljs-string">&#x27;ど&#x27;</span>: <span class="hljs-string">&#x27;と&#x27;</span>,<br>    <span class="hljs-string">&#x27;ば&#x27;</span>: <span class="hljs-string">&#x27;は&#x27;</span>, <span class="hljs-string">&#x27;び&#x27;</span>: <span class="hljs-string">&#x27;ひ&#x27;</span>, <span class="hljs-string">&#x27;ぶ&#x27;</span>: <span class="hljs-string">&#x27;ふ&#x27;</span>, <span class="hljs-string">&#x27;べ&#x27;</span>: <span class="hljs-string">&#x27;へ&#x27;</span>, <span class="hljs-string">&#x27;ぼ&#x27;</span>: <span class="hljs-string">&#x27;ほ&#x27;</span>,<br>    <span class="hljs-string">&#x27;ぱ&#x27;</span>: <span class="hljs-string">&#x27;は&#x27;</span>, <span class="hljs-string">&#x27;ぴ&#x27;</span>: <span class="hljs-string">&#x27;ひ&#x27;</span>, <span class="hljs-string">&#x27;ぷ&#x27;</span>: <span class="hljs-string">&#x27;ふ&#x27;</span>, <span class="hljs-string">&#x27;ぺ&#x27;</span>: <span class="hljs-string">&#x27;へ&#x27;</span>, <span class="hljs-string">&#x27;ぽ&#x27;</span>: <span class="hljs-string">&#x27;ほ&#x27;</span>,<br>    <span class="hljs-string">&#x27;ガ&#x27;</span>: <span class="hljs-string">&#x27;カ&#x27;</span>, <span class="hljs-string">&#x27;ギ&#x27;</span>: <span class="hljs-string">&#x27;キ&#x27;</span>, <span class="hljs-string">&#x27;グ&#x27;</span>: <span class="hljs-string">&#x27;ク&#x27;</span>, <span class="hljs-string">&#x27;ゲ&#x27;</span>: <span class="hljs-string">&#x27;ケ&#x27;</span>, <span class="hljs-string">&#x27;ゴ&#x27;</span>: <span class="hljs-string">&#x27;コ&#x27;</span>,<br>    <span class="hljs-string">&#x27;ザ&#x27;</span>: <span class="hljs-string">&#x27;サ&#x27;</span>, <span class="hljs-string">&#x27;ジ&#x27;</span>: <span class="hljs-string">&#x27;シ&#x27;</span>, <span class="hljs-string">&#x27;ズ&#x27;</span>: <span class="hljs-string">&#x27;ス&#x27;</span>, <span class="hljs-string">&#x27;ゼ&#x27;</span>: <span class="hljs-string">&#x27;セ&#x27;</span>, <span class="hljs-string">&#x27;ゾ&#x27;</span>: <span class="hljs-string">&#x27;ソ&#x27;</span>,<br>    <span class="hljs-string">&#x27;ダ&#x27;</span>: <span class="hljs-string">&#x27;タ&#x27;</span>, <span class="hljs-string">&#x27;ヂ&#x27;</span>: <span class="hljs-string">&#x27;チ&#x27;</span>, <span class="hljs-string">&#x27;ヅ&#x27;</span>: <span class="hljs-string">&#x27;ツ&#x27;</span>, <span class="hljs-string">&#x27;デ&#x27;</span>: <span class="hljs-string">&#x27;テ&#x27;</span>, <span class="hljs-string">&#x27;ド&#x27;</span>: <span class="hljs-string">&#x27;ト&#x27;</span>,<br>    <span class="hljs-string">&#x27;バ&#x27;</span>: <span class="hljs-string">&#x27;ハ&#x27;</span>, <span class="hljs-string">&#x27;ビ&#x27;</span>: <span class="hljs-string">&#x27;ヒ&#x27;</span>, <span class="hljs-string">&#x27;ブ&#x27;</span>: <span class="hljs-string">&#x27;フ&#x27;</span>, <span class="hljs-string">&#x27;ベ&#x27;</span>: <span class="hljs-string">&#x27;ヘ&#x27;</span>, <span class="hljs-string">&#x27;ボ&#x27;</span>: <span class="hljs-string">&#x27;ホ&#x27;</span>,<br>    <span class="hljs-string">&#x27;パ&#x27;</span>: <span class="hljs-string">&#x27;ハ&#x27;</span>, <span class="hljs-string">&#x27;ピ&#x27;</span>: <span class="hljs-string">&#x27;ヒ&#x27;</span>, <span class="hljs-string">&#x27;プ&#x27;</span>: <span class="hljs-string">&#x27;フ&#x27;</span>, <span class="hljs-string">&#x27;ペ&#x27;</span>: <span class="hljs-string">&#x27;ヘ&#x27;</span>, <span class="hljs-string">&#x27;ポ&#x27;</span>: <span class="hljs-string">&#x27;ホ&#x27;</span>,<br>&#125;<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">convert_to_original_sound</span>(<span class="hljs-params">kana</span>):<br>    original_kana = <span class="hljs-string">&#x27;&#x27;</span><br>    <span class="hljs-keyword">for</span> char <span class="hljs-keyword">in</span> kana:<br>        <span class="hljs-keyword">if</span> char <span class="hljs-keyword">in</span> mapping_table:<br>            original_kana += mapping_table[char]<br>        <span class="hljs-keyword">else</span>:<br>            original_kana += char<br>    <span class="hljs-keyword">return</span> original_kana<br></code></pre></td></tr></table></figure>

<p>至此，数据清洗基本完成，下面就是进行相似度比对</p>
<h3 id="数据比对"><a href="#数据比对" class="headerlink" title="数据比对"></a>数据比对</h3><h4 id="SequenceMatcher字符串相似度"><a href="#SequenceMatcher字符串相似度" class="headerlink" title="SequenceMatcher字符串相似度"></a>SequenceMatcher字符串相似度</h4><p>对于相似度匹配，首先想到<code>difflib</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">def diff_similarity(str1, str2):<br>    &quot;&quot;&quot;difflib计算字符串相似度&quot;&quot;&quot;<br>    similarity = SequenceMatcher(None, str1, str2).ratio()<br>    return similarity<br></code></pre></td></tr></table></figure>

<p>但这种方法是比较文本的距离，对于顺序变化字符串的识别度会造成误差</p>
<h4 id="Jaccard顺序相似度"><a href="#Jaccard顺序相似度" class="headerlink" title="Jaccard顺序相似度"></a>Jaccard顺序相似度</h4><p>尝试问下GPT，它给出了一个比较合适的匹配方案</p>
<p><img src="/img/totk_shrine04.png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">jaccard_similarity</span>(<span class="hljs-params">str1, str2</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;Jaccard算法顺序比较&quot;&quot;&quot;</span><br>    set1 = <span class="hljs-built_in">set</span>(str1)<br>    set2 = <span class="hljs-built_in">set</span>(str2)<br>    intersection = <span class="hljs-built_in">len</span>(set1.intersection(set2))<br>    union = <span class="hljs-built_in">len</span>(set1.union(set2))<br>    similarity = intersection / union<br>    <span class="hljs-keyword">return</span> similarity<br></code></pre></td></tr></table></figure>



<p>我们根据每种类型对所有神庙比较，按相似度最高的前n名生成结果</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">match</span>(<span class="hljs-params">shrine_name:<span class="hljs-built_in">str</span>,reality_data:<span class="hljs-built_in">list</span>[<span class="hljs-built_in">dict</span>], n:<span class="hljs-built_in">int</span>=<span class="hljs-number">3</span>, convert:<span class="hljs-built_in">bool</span>=<span class="hljs-literal">True</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;匹配神庙和原型数据相似度</span><br><span class="hljs-string">    Param:</span><br><span class="hljs-string">        shrine - 神庙名称</span><br><span class="hljs-string">        reality_data: 原型数据</span><br><span class="hljs-string">        n: 选取最匹配的n个值&quot;&quot;&quot;</span><br>    <br>    <span class="hljs-comment"># 相似度列表</span><br>    similarity_ls = []<br>    <span class="hljs-comment"># 原型列表</span><br>    reality_ls = []<br><br>    <span class="hljs-keyword">for</span> reality_name <span class="hljs-keyword">in</span> reality_data:<br>      	<br>        reality_kata = reality_data[reality_name]<br>        <span class="hljs-comment"># 比较相似度</span><br>        <span class="hljs-keyword">if</span> convert:<br>            shrine_name = convert_to_original_sound(shrine_name)<br>            reality_kata = convert_to_original_sound(reality_kata)<br>        similarity = jaccard_similarity(shrine_name, reality_kata) <br>        <span class="hljs-comment"># reality_name[&#x27;similarity&#x27;] = similarity</span><br>        reality = &#123;<br>            <span class="hljs-string">&#x27;name&#x27;</span>: reality_name,<br>            <span class="hljs-string">&#x27;kata&#x27;</span>: reality_kata,<br>            <span class="hljs-string">&#x27;similarity&#x27;</span>: similarity<br>        &#125;<br>        reality_ls.append(reality)<br>        similarity_ls.append(similarity)<br>    <span class="hljs-comment"># 求最相似的n个值</span><br>    indixies = largest_indices(similarity_ls, n)<br>    result = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> indixies:<br>        result.append(reality_ls[i])<br><br>    <span class="hljs-keyword">return</span> result<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_match_result</span>(<span class="hljs-params">shrine_ls, reality_data, n, data_type:<span class="hljs-built_in">str</span>=<span class="hljs-string">&#x27;station&#x27;</span>, rate:<span class="hljs-built_in">float</span>=<span class="hljs-number">0.6</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;获取匹配结果&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">for</span> shrine <span class="hljs-keyword">in</span> shrine_ls:<br>        shrine_ja = shrine[<span class="hljs-string">&#x27;ja&#x27;</span>]<br>        shrine_name = shrine_ja.replace(<span class="hljs-string">&#x27;の祠&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>)<br>        result = <span class="hljs-keyword">match</span>(shrine_name, reality_data, n)<br>        <span class="hljs-built_in">print</span>(result)<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(result)):<br>            one = result[i]<br>            shrine.update(&#123;<br>                data_type+<span class="hljs-string">&#x27;_name&#x27;</span>+<span class="hljs-built_in">str</span>(i+<span class="hljs-number">1</span>) : one[<span class="hljs-string">&#x27;name&#x27;</span>],<br>                data_type+<span class="hljs-string">&#x27;_kata&#x27;</span>+<span class="hljs-built_in">str</span>(i+<span class="hljs-number">1</span>) : one[<span class="hljs-string">&#x27;kata&#x27;</span>],<br>                data_type+<span class="hljs-string">&#x27;_similarity&#x27;</span>+<span class="hljs-built_in">str</span>(i+<span class="hljs-number">1</span>) : one[<span class="hljs-string">&#x27;similarity&#x27;</span>],<br>                data_type+<span class="hljs-string">&#x27;_match&#x27;</span>+<span class="hljs-built_in">str</span>(i+<span class="hljs-number">1</span>) : <span class="hljs-built_in">bool</span>( one[<span class="hljs-string">&#x27;similarity&#x27;</span>] &gt;= rate)<br>            &#125;)<br>    <span class="hljs-keyword">return</span> shrine_ls<br></code></pre></td></tr></table></figure>

<p>由于不清楚老任选取名称的具体方向，数据越大覆盖面就越广，这样能提供参考的数据就越多。因此，选择了比较多的原型数据进行匹配，后续再进行人工过滤</p>
<h2 id="结果分析"><a href="#结果分析" class="headerlink" title="结果分析"></a>结果分析</h2><p>大部分地名可以做到较高的匹配度，基本可以锁定。</p>
<p>但在人工分析和汇总后，也发现存在一些问题</p>
<h3 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h3><ol>
<li><p>神庙叠词问题，少部分神庙存在单字重复的情况，例如<code>セパパ</code>、<code>ゲミミカ</code>、<code>マヤタタ</code>这种将一个假名重复一遍，会导致匹配度下降，而且名字越短越难匹配上，只能通过人工判断</p>
</li>
<li><p>固有地名问题，由于真名也存在多音的情况，使用<code>pykakasi</code>转换时，有概率出现错误的多音字，最终导致匹配度很低；暂未找到较好的转换方式，一个不是很优的解决方案是提高匹配数量从而列出更多的选择</p>
</li>
<li><p>类名影响问题，类名的真名可以通过上面方法剔除掉，但是假名无法剔除，例如<code>寺-&gt;JI</code>这种单音字，如果要剔除，会将单词中所有的<code>ジ</code>都剔除，如果存在多个该音，就会导致错误剔除，最后影响匹配结果，例如<code>一乗寺 イチジョウジ</code></p>
</li>
</ol>
<h3 id="优化措施"><a href="#优化措施" class="headerlink" title="优化措施"></a>优化措施</h3><p>优化匹配度算法，对叠词以及超长名称的匹配进行优化</p>
<p>固有地名（kakasi）准确转换为假名，需要找网站或接口</p>
<p>优化对类型名称的剔除，支持对假名进行剔除</p>
<h2 id="原型数据"><a href="#原型数据" class="headerlink" title="原型数据"></a>原型数据</h2><p><strong>神庙数据</strong></p>
<p><a target="_blank" rel="noopener" href="https://github.com/tingod/totk">tingod&#x2F;totk: Data sheets for zelda-totk (github.com)</a></p>
<p>王国之泪相关文本数据</p>
<p><strong>旅游导航网站 NAVI</strong></p>
<p><a target="_blank" rel="noopener" href="https://www.its-mo.com/pois/26/?genrecode=0200000000">京都府のレジャー・観光・スポーツ　1ページ目 | いつもNAVI (its-mo.com)</a></p>
<p><strong>寺庙 Temple</strong></p>
<p><a target="_blank" rel="noopener" href="https://github.com/hiiragi17/greentea_temple/blob/main/db/csv/temple_info.csv">greentea_temple&#x2F;db&#x2F;csv&#x2F;temple_info.csv at main · hiiragi17&#x2F;greentea_temple · GitHub</a></p>
<p>ishibumi 石碑&#x2F;道标</p>
<p><a target="_blank" rel="noopener" href="https://github.com/code4fukui/kyotoishibumi/blob/main/ishibumi-data-281211.csv">kyotoishibumi&#x2F;ishibumi-data-281211.csv at main · code4fukui&#x2F;kyotoishibumi (github.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://code4fukui.github.io/kyotoishibumi/">全1470個所 いしぶみマップ - 京都市オープンデータ x egmapjs (code4fukui.github.io)</a></p>
<p><strong>景点 Spots</strong></p>
<p><a target="_blank" rel="noopener" href="https://github.com/monogocoro/qa-preprocessor/blob/master/db/data/json/spots.json">qa-preprocessor&#x2F;db&#x2F;data&#x2F;json&#x2F;spots.json at master · monogocoro&#x2F;qa-preprocessor · GitHub</a></p>
<p><strong>车站 Station</strong></p>
<p><a target="_blank" rel="noopener" href="https://github.com/dcsan/kotoba/blob/master/bot/resources/quiz_data/stations_kyoto.json">kotoba&#x2F;bot&#x2F;resources&#x2F;quiz_data&#x2F;stations_kyoto.json at master · dcsan&#x2F;kotoba · GitHub</a></p>
<p><strong>邮编 Postal Code</strong></p>
<p><a target="_blank" rel="noopener" href="https://github.com/polm/posuto">polm&#x2F;posuto: Japanese postal code data. (github.com)</a></p>
<p><strong>神社 Jinjia</strong></p>
<p><a target="_blank" rel="noopener" href="https://github.com/hiiragi17/greentea_temple/blob/main/db/csv/temple_info.csv">greentea_temple&#x2F;db&#x2F;csv&#x2F;temple_info.csv at main · hiiragi17&#x2F;greentea_temple · GitHub</a></p>
<p><strong>灾害 Saigai</strong></p>
<p><a target="_blank" rel="noopener" href="https://github.com/chiisagosha/opendata/blob/master/kyoto-saigai/locations_kyoto-saigai.csv">opendata&#x2F;kyoto-saigai&#x2F;locations_kyoto-saigai.csv at master · chiisagosha&#x2F;opendata · GitHub</a></p>
<p><strong>统金 Zengin</strong></p>
<p>158 京都分行<br><a target="_blank" rel="noopener" href="https://zengin-code.github.io/">Zengin Code &#x2F; 統一金融機関コードデータセット (zengin-code.github.io)</a><br><a target="_blank" rel="noopener" href="https://zengin-code.github.io/api/branches/0158.json">zengin-code.github.io&#x2F;api&#x2F;branches&#x2F;0158.json</a></p>
<p><strong>GitTables</strong></p>
<p><a target="_blank" rel="noopener" href="https://gittables.github.io/">Home | GitTables</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/tabbydoc/tabbyld2/blob/master/datasets/GitTables_SemTab_2022/tables/GitTables_26539.csv">tabbyld2&#x2F;datasets&#x2F;GitTables_SemTab_2022&#x2F;tables&#x2F;GitTables_26539.csv at master · tabbydoc&#x2F;tabbyld2 · GitHub</a></p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a target="_blank" rel="noopener" href="https://docs.qq.com/sheet/DSkNoS012WlNhYnBa">在线文档：王国之泪神庙原型研究</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.qq.com/doc/p/fff76b1feefa79c40426541fe268a52521d05827">在线文档：《王国之泪》破魔神庙原型考究 - 名胜古迹篇</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bugi.tw/2015/12/blog-post_24.html">文章：一次搞懂「京都」各式交通工具！（含京都公車、地鐵、JR、私鐵路線圖，2019年7月更新） - 跟著不羈去旅行 (bugi.tw)</a></p>
<p><a target="_blank" rel="noopener" href="https://oneday-pass.kyoto/map/?lang=zh-hant">网站：地圖 | 京都市交通局 (oneday-pass.kyoto)</a></p>
<p><a target="_blank" rel="noopener" href="https://www.inside-games.jp/article/img/2023/05/20/146032/1203362.html">新闻：『ゼルダの伝説 ティアキン』祠の元ネタに「京都説」が挙がる―市内地図との比較で見えた“意外な繋がり” 2枚目の写真・画像 | インサイド (inside-games.jp)</a></p>
<p><a target="_blank" rel="noopener" href="https://twitter.com/SO_far_69/status/1666344553291595776?s=20">推文：すい@Twitter</a></p><div id="paginator"></div></div><div id="post-footer"><div id="pages"><div class="footer-link" style="width: 50%;text-align:right;border-right:1px #fe2 solid"><a href="/9999/09/09/index/">← Next Index 导航</a></div><div class="footer-link" style="width: 50%;right:1px;border-left:1px #fe2 solid"><a href="/2023/06/23/notes/memo/ubuntu_02/">Ubuntu系统-应用安装篇 Prev →</a></div></div></div></div><div class="bottom-btn"><div><a id="to-top" onClick="scrolls.scrolltop();" title="To Top" style="opacity: 0; display: none;">∧</a><a id="to-index" href="#toc-div" title="To Catalog">≡</a><a id="color-mode" onClick="colorMode.change()" title="Change Theme"></a></div></div></article><aside><div id="about"><a href="/" id="logo"><img src="img/index/logo.png" alt="Logo"></a><h1 id="Dr"><a href="/">Dr.Syaoran</a></h1><div id="description"><p>科技改变生活<br>Tech changes lives.</p></div><div id="social-links"><a class="social" target="_blank" rel="noopener" href="https://github.com/Syaoran33"><i class="fab fa-github" alt="GitHub"></i></a><a class="social" target="_blank" rel="noopener" href="https://space.bilibili.com/276567009"><i class="fab fa-bilibili" alt="Bilibili"></i></a><a class="social" target="_blank" rel="noopener" href="https://www.reddit.com/user/Shaoran33"><i class="fab fa-reddit" alt="Reddit"></i></a></div></div><div id="aside-block"><div id="toc-div"><h1>Catalog</h1><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A0%94%E7%A9%B6%E6%80%9D%E8%B7%AF"><span class="toc-number">2.</span> <span class="toc-text">研究思路</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A0%94%E7%A9%B6%E6%AD%A5%E9%AA%A4"><span class="toc-number">3.</span> <span class="toc-text">研究步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96"><span class="toc-number">3.1.</span> <span class="toc-text">安装依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%AC%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-number">3.2.</span> <span class="toc-text">爬取数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E9%87%8F%E6%95%B0%E6%8D%AE"><span class="toc-number">3.2.1.</span> <span class="toc-text">全量数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%99%AF%E7%82%B9%E6%95%B0%E6%8D%AE"><span class="toc-number">3.2.2.</span> <span class="toc-text">景点数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E7%88%AC%E8%99%AB%E7%A8%8B%E5%BA%8F"><span class="toc-number">3.2.3.</span> <span class="toc-text">编写爬虫程序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90"><span class="toc-number">3.2.4.</span> <span class="toc-text">数据分析</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A3%80%E7%B4%A2%E6%95%B0%E6%8D%AE"><span class="toc-number">3.3.</span> <span class="toc-text">检索数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E5%AD%97%E6%A3%80%E7%B4%A2"><span class="toc-number">3.3.1.</span> <span class="toc-text">关键字检索</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E6%A3%80%E7%B4%A2"><span class="toc-number">3.3.2.</span> <span class="toc-text">类型检索</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97"><span class="toc-number">3.4.</span> <span class="toc-text">数据清洗</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B1%BB%E5%90%8D%E7%9C%81%E7%95%A5"><span class="toc-number">3.4.1.</span> <span class="toc-text">类名省略</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9C%9F%E5%81%87%E5%90%8D%E8%BD%AC%E6%8D%A2"><span class="toc-number">3.4.2.</span> <span class="toc-text">真假名转换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%98%E9%9F%B3%E7%BB%9F%E4%B8%80"><span class="toc-number">3.4.3.</span> <span class="toc-text">变音统一</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%AF%94%E5%AF%B9"><span class="toc-number">3.5.</span> <span class="toc-text">数据比对</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#SequenceMatcher%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9B%B8%E4%BC%BC%E5%BA%A6"><span class="toc-number">3.5.1.</span> <span class="toc-text">SequenceMatcher字符串相似度</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Jaccard%E9%A1%BA%E5%BA%8F%E7%9B%B8%E4%BC%BC%E5%BA%A6"><span class="toc-number">3.5.2.</span> <span class="toc-text">Jaccard顺序相似度</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E6%9E%9C%E5%88%86%E6%9E%90"><span class="toc-number">4.</span> <span class="toc-text">结果分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90"><span class="toc-number">4.1.</span> <span class="toc-text">问题分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%98%E5%8C%96%E6%8E%AA%E6%96%BD"><span class="toc-number">4.2.</span> <span class="toc-text">优化措施</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%9F%E5%9E%8B%E6%95%B0%E6%8D%AE"><span class="toc-number">5.</span> <span class="toc-text">原型数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">6.</span> <span class="toc-text">参考资料</span></a></li></ol></div></div><footer><nobr><span class="text-title">🧑🏻‍💻</span><span class="text-content">小狼  Syaoran</span></nobr><br><nobr><span class="text-title">🌐</span><span class="text-content">2020-Present</span></nobr><br><nobr>Published with <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></nobr><wbr><nobr> Theme <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknights</a></nobr><wbr><nobr>by <a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas><script src="/js/search.js"></script><script src="/js/arknights.js"></script><script src="//unpkg.com/lightgallery@2.7.1/lightgallery.min.js"></script><script src="//unpkg.com/lightgallery@2.7.1/plugins/zoom/lg-zoom.min.js"></script><script src="//unpkg.com/lightgallery@2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script><script src="/js/pjax.js"></script><script class="pjax-js">reset= () => {code.findCode();
document.querySelector('.lg-container')?.remove()
lightGallery(document.getElementById('post-bg'), {
  plugins: [lgZoom,lgThumbnail],
  selector: '.item-img'})}</script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);reset()})</script></body></html>